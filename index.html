<!DOCTYPE html>
<html>
<head>
<style>
    body {
        margin: 0;
        padding: 0;
        background-image: url('silhouette.png');
        background-size: cover;
        background-position: center;
        background-repeat: no-repeat;
        height: 100vh;
        width: 100vw;
    }
</style>
</head>

<body>

<script src="https://cdn.cycling74.com/rnbo/1.4.2/rnbo.min.js"></script>
<script>
let started = false;

function waitForRNBO() {
    if (typeof RNBO === "undefined") {
        setTimeout(waitForRNBO, 50);
        return;
    }

    async function startRNBO() {
        if (started) return;
        started = true;

        const context = new (window.AudioContext || window.webkitAudioContext)();

        const response = await fetch("organic_website_soundtrack.export.json");
        const patcher = await response.json();

        const device = await RNBO.createDevice({ context, patcher });

        device.node.connect(context.destination);

        console.log("RNBO started");
        console.log("Parameters:", device.parameters);
        console.log("Device node:", device.node);   
    }

    window.addEventListener("click", startRNBO);
    window.addEventListener("touchstart", startRNBO);
    window.addEventListener("scroll", startRNBO);
    window.addEventListener("mousemove", startRNBO);
}

waitForRNBO();
</script>

</body>
</html>
